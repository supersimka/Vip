<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;

class HomeController extends Controller
{
	public $infoSite;
	public $date;
	public $general;

	public function __construct()
    {
		//извлекаем общую информацию о сайте
		$this->infoSite = new HomeModel();

		$this->date = date('Y-m-d');

		$this->general = [
		'object' => $this->infoSite->get_config(),
		'visibility' => $this->infoSite->get_visibility(),
		'topMenu' => $this->infoSite->get_topmenu(),
		'socials' => $this->infoSite->get_social(),
		'pharmList' => $this->infoSite->get_PharmList(),
		'districtsList' => $this->infoSite->get_DistrictsList(),
		'locationsList' => $this->infoSite->get_LocationsList(),
		'location' => $this->infoSite->get_locationUser()
		];
    }

    //Главная страница
	public function homepage()
    {
		$localInfo = [
		'rightMenu' => $this->infoSite->get_rightmenu(),
		'sliders' => $this->infoSite->get_slider(),
		'specials' => $this->infoSite->get_special(),
		'categories' => $this->infoSite->get_catalog(),
		'collections' => $this->infoSite->get_collections(),
		'news' => $this->infoSite->get_news(),
		'brands' => $this->infoSite->get_brands(),
		'catalog' => $this->infoSite->get_sections(1)
		];

		return view('homepage', array_merge($this->general, $localInfo));
    }
}
